#!/usr/bin/env php
<?php

/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ðŸŽ® OGAN CONSOLE - Point d'entrÃ©e CLI
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 */

require __DIR__ . '/../vendor/autoload.php';

use Ogan\Console\Application;
use Ogan\Config\Config;

// Charger la configuration
$configPath = __DIR__ . '/../config/parameters.yaml';
$envPath = __DIR__ . '/../.env';

if (!file_exists($envPath)) {
    echo "âš ï¸  Fichier .env non trouvÃ©.\n";
    $envExample = __DIR__ . '/../.env.example';
    if (file_exists($envExample)) {
        copy($envExample, $envPath);
        echo "âœ… Fichier .env crÃ©Ã© depuis .env.example\n\n";
    }
}

Config::init($configPath, $envPath);

// CrÃ©er l'application console
$app = new Application('Ogan Framework', '1.0.0');

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CHARGER LES COMMANDES DEPUIS DES FICHIERS SÃ‰PARÃ‰S
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

$commandsDir = __DIR__ . '/commands';

// Tailwind
require $commandsDir . '/tailwind.php';
registerTailwindCommands($app);

// Utilitaires
require $commandsDir . '/utils.php';
registerUtilsCommands($app);

// Make
require $commandsDir . '/make.php';
registerMakeCommands($app);

// Migrate
require $commandsDir . '/migrate.php';
registerMigrateCommands($app);

// Auth
require $commandsDir . '/auth.php';
registerAuthCommands($app);

// Pagination
require $commandsDir . '/pagination.php';
registerPaginationCommands($app);

// Cache
require $commandsDir . '/cache.php';
registerCacheCommands($app);

// API
require $commandsDir . '/api.php';
registerApiCommands($app);

// Seeder
require $commandsDir . '/seeder.php';
registerSeederCommands($app);

// Assets (OganAssetMapper)
require $commandsDir . '/assets.php';
registerAssetsCommands($app);

// SEO (sitemap.xml, robots.txt)
require $commandsDir . '/seo.php';
registerSeoCommands($app);

// Skeleton (synchronisation avec le skeleton de rÃ©fÃ©rence)
require $commandsDir . '/skeleton.php';
registerSkeletonCommands($app);

// Server (serveur de dÃ©veloppement)
require $commandsDir . '/server.php';
registerServerCommands($app);

// ExÃ©cuter l'application
$app->run($argv);
